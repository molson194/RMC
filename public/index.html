<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rate My Connection</title>
</head>

<body>
  <h1>Test</h1>
  <!-- TODO: callback should change for local/remote runs -->
  <a id="login" href="test" class="button">Log In</a>
  <p id="resp">No function response</p>
</body>
<script>
  let currentPage = window.location.href;
  currentPage = currentPage.replaceAll("index.html", "");
  currentPage = currentPage.replaceAll("/", "%2F");
  currentPage = currentPage.replaceAll(":", "%3A");
  let linkedInLoginUrl = "https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=863gl16an25sq9&redirect_uri=" + currentPage + "callback%2F&scope=r_liteprofile%20r_emailaddress";
  console.log(linkedInLoginUrl);
  document.querySelector("#login").href = linkedInLoginUrl;

  (async function () {
    let response = await fetch(`/api/TestFunction`);
    let message = await response.text();
    console.log(message);
    document.querySelector("#resp").innerHTML = message
  })();
</script>

</html>